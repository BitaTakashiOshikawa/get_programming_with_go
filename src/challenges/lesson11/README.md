## LESSON11
### チャレンジ：ヴィジュネル暗号

ヴィジュネル暗号は、いわばシーザー暗号の16世紀版です。  
このチャレンジではキーワードを使って暗号テキストを復号するプログラムを書きます。  

ヴィジュネル暗号の解説に入る前に、さきほどのシーザー暗号を再構成します。  
シーザー暗号では、平文のメッセージを暗号化するため、それぞれの文字を前方に3文字分ずらしました。  
そうして作った暗号は、逆方向に同じだけシフトすると復号されるのでした。

さて、英語のアルファベットにそれぞれ1個の数値を割り当ててみます。A = 0, B = 1 以下同様で Z = 25です。  
こう考えると3文字というシフト量はDによって表現できます（D = 3）。
表1にあるテキストを復号するには、上段の最初の文字LをDだけシフトして戻します。  
L = 11, D = 3なので、その結果は 11 - 3 で8、つまり文字Iです。文字Aを復号する時は循環してXにする必要があります。  

表1：シーザー暗号  
ーーーーーーーーーーーーーーーーーーーーーーー  
L F D P H L V D Z L F R Q T X H U H G  
D D D D D D D D D D D D D D D D D D D  
↓ ↓ ...  
I C ...  
ーーーーーーーーーーーーーーーーーーーーーーー  

このシーザー暗号とROT13は「頻度分析」という技法で解読されやすい作りです。  
英語で頻繁に現れるEの文字は暗号化されたテキストでもやはり頻繁に出現します。  
そういうパターンを暗号テキストで探すことによって暗号化のコードを破られてしまいます。  
コード破りを挫折させるために、ヴィジュネル暗号は各文字のシフト数として3や13のような定数ではなく、キーワードの繰り返しを使います。  
表2では「GOLANG」というキーワードを使っていますが、このようなキーワードをメッセージが終わるまで繰り返して使うわけです。  

表2：ヴィジュネル暗号  
ーーーーーーーーーーーーーーーーーーーーーーーー  
C S O I T E U I W U I Z N S R O C N K F  
G O L A N G G O L A N G G O L A N G G O  
↓ ↓ ...  
W E ...  
ーーーーーーーーーーーーーーーーーーーーーーーー  

これでヴィジュネル暗号の仕組みがわかりました。そして、キーワードが「D」のヴィジュネル暗号はシーザー暗号と同じです。  
同様にROT13はキーワードが「N」です（N = 13）。  
もっと長いキーワードを使わなければメリットがありませんが。

#### 練習問題-1（decipher.go）
表2に示した暗号テキストを復号するプログラムを書きましょう。  
単語にするため、テキストもキーワードも全て大文字のアルファベットにします。  
```go
cipherText := "CSOITEUIWUIZNSROCNKF"
keyword := "GOLANG"
```
* `strings.Repeat`関数を使うと便利かもしれません。試してみましょう。
  * ただし、この課題は復号したメッセージを表示するのに使う`fmt`以外のパッケージをインポートしなくても達成できます。
* この課題をループで`range`を使って、そして使わずに書いてみましょう。
  * `range`キーワードが文字列をruneに分割するのに対して`keyword[0]`のようなインデックスは結果が1バイトになることをお忘れなく。  

#### 練習問題-2（cipher.go）
メッセージを暗号化して送れるように平文テキストをキーワードで暗号化するプログラムを書きましょう。ただし、
```go
plainText := "YOURMESSAGEGOESHERE"
```
このように平文メッセージをスペースなしの大文字で書くのはやめて、次のように書き、暗号化する前にスペースを取り除いで大文字にしましょう。  
それには関数の`strings.Replace`と`strings.ToUpper`を使えます。　　
```go
plainText := "your message goes here"
```
完成したら平文テキストの暗号化が正しくできたかチェックするために、暗号化したテキストをそれと同じキーワードを使って復号しましょう。  
```go
keyword := "GOLANG"
```
